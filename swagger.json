{"openapi":"3.0.1","info":{"title":"Infoeste Blog API","version":"0.1.0","description":"API para o blog do Infoeste.","contact":{"name":"Rener Pires","url":"https://github.com/RenerPires","email":"rener.nascimento@vericode.com.br"}},"servers":[{"url":"http://localhost:3000"}],"paths":{"/auth":{"post":{"summary":"Autenticar um usuário","tags":["auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginCredentials"}}}},"responses":{"200":{"description":"Usuário autenticado com sucesso. O token de acesso é válido por 1 hora.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginSuccessResponse"}}}},"401":{"description":"Usuário não autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginFailResponse"}}}}}}},"/posts":{"get":{"summary":"Recupera todos os posts","tags":["posts"],"responses":{"200":{"description":"Lista de todos os posts","content":{"application/json":{"schema":{"type":"object","properties":{"posts":{"type":"array","items":{"$ref":"#/components/schemas/PostCreatedResponse"}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}},"post":{"summary":"Registra um novo post","tags":["posts"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Post"}}}},"responses":{"201":{"description":"O post registrado","content":{"application/json":{"schema":{"type":"object","properties":{"post":{"$ref":"#/components/schemas/PostCreatedResponse"}}}}}},"400":{"description":"Ocorre quando uma restrição de post não é respeitada","content":{"application/json":{"schema":{"type":"object","$ref":"#/components/schemas/PostCreationFailResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/posts/{id}":{"get":{"summary":"Recupera um post pelo seu id","tags":["posts"],"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"O id do post","example":1}],"responses":{"200":{"description":"O post correspondente ao id recebido","content":{"application/json":{"schema":{"type":"object","properties":{"post":{"$ref":"#/components/schemas/PostCreatedResponse"}}}}}},"400":{"description":"O id do post recebido é inválido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidPostIdResponse"}}}},"404":{"description":"Nenhum post encontrado para o id recebido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostNotFoundResponse"}}}}}},"put":{"summary":"Atualiza um post pelo seu id","tags":["posts"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"O id do post","example":1}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Post"}}}},"responses":{"200":{"description":"O post atualizado","content":{"application/json":{"schema":{"type":"object","properties":{"post":{"$ref":"#/components/schemas/PostCreatedResponse"}}}}}},"400":{"description":"O id do post recebido é inválido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidPostIdResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"description":"O post não pertence ao usuário logado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostIsNotYoursResponse"}}}},"404":{"description":"Nenhum post encontrado para o id recebido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostNotFoundResponse"}}}}}},"delete":{"summary":"Exclui um post pelo seu id","tags":["posts"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"O id do post","example":1}],"responses":{"204":{"description":"Post excluído com sucesso"},"400":{"description":"O id do post recebido é inválido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidPostIdResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"description":"Nenhum post encontrado para o id recebido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostNotFoundResponse"}}}}}}},"/posts/user/{userId}":{"get":{"summary":"Recupera todos os posts do usuário relacionado ao id recebido","tags":["posts"],"parameters":[{"in":"path","name":"userId","schema":{"type":"number"},"required":true,"description":"O id do usuário que criou os posts","example":1}],"responses":{"200":{"description":"Todos os posts criados pelo usuário relacionado","content":{"application/json":{"schema":{"type":"object","properties":{"posts":{"type":"array","items":{"$ref":"#/components/schemas/PostCreatedResponse"}}}}}}}}}},"/users":{"get":{"summary":"Listar todos os usuários","tags":["users"],"responses":{"200":{"description":"Lista de usuários","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/UserCreatedResponse"}}}}}}}}},"post":{"summary":"Registrar um novo usuário","tags":["users"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"responses":{"201":{"description":"O usuário registrado","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserCreatedResponse"}}}}}},"400":{"description":"Ocorre quando uma restrição de usuário não é respeitada","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreationFailResponse"}}}}}}},"/users/me":{"get":{"summary":"Recuperar dados do usuário autenticado","tags":["users"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"O usuário autenticado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreatedResponse"}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/users/{id}":{"get":{"summary":"Recuperar um usuário pelo seu id","tags":["users"],"parameters":[{"in":"path","name":"id","schema":{"type":"number"},"required":true,"description":"O id do usuário"}],"responses":{"200":{"description":"O usuário encontrado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreatedResponse"}}}},"404":{"description":"Nenhum usuário encontrado para o id recebido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoUserFoundResponse"}}}}}}},"/users/{email}":{"delete":{"summary":"Excluir um usuário por e-mail","tags":["users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"email","schema":{"type":"string"},"required":true,"description":"O e-mail do usuário","example":"johdoe@email.com"}],"responses":{"204":{"description":"Usuário excluído com sucesso"},"400":{"description":"O e-mail fornecido é inválido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvalidUserEmailResponse"}}}},"404":{"description":"Nenhum usuário encontrado para o e-mail recebido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NoUserFoundResponse"}}}}}}}},"components":{"schemas":{"Post":{"type":"object","required":["title","content"],"properties":{"title":{"type":"string","description":"Título do post. Deve ter entre 5 e 30 caracteres."},"content":{"type":"string","description":"Conteúdo do post. Deve ter entre 5 e 144 caracteres."}},"example":{"title":"Aprendendo programação com Go","content":"Go é uma linguagem de programação muito popular, que é ótima para aprender lógica de programação."}},"PostCreatedResponse":{"allOf":[{"$ref":"#/components/schemas/Post"},{"type":"object","required":["id","user"],"properties":{"id":{"type":"number","description":"O id gerado automaticamente do post registrado."},"user":{"$ref":"#/components/schemas/UserCreatedResponse"}},"example":{"id":1,"title":"Aprendendo programação com Go","content":"Go é uma linguagem de programação muito popular, que é ótima para aprender lógica de programação.","user":{"id":1,"name":"John Doe","email":"johdoe@email.com"}}}]},"PostCreationFailResponse":{"type":"object","properties":{"messages":{"type":"array","items":{"type":"string"},"example":["Título do produto precisa ter entre 5 e 30 caracteres","Conteúdo do post precisa ter entre 5 e 144 caracteres"]}}},"PostNotFoundResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que nenhum post foi encontrado"}},"example":{"message":"Post não encontrado"}},"PostIsNotYoursResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que nenhum post não pertence ao usuário logado"}},"example":{"message":"Post não pertence ao usuário"}},"InvalidPostIdResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que o id do post recebido é inválido"}},"example":{"message":"Id inválido"}},"InvalidUserIdResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que o id do usuário recebido é inválido"}},"example":{"message":"Id de usuário inválido"}},"User":{"type":"object","required":["name","email","password"],"properties":{"name":{"type":"string","description":"Nome do usuário. Deve ter entre 5 e 50 caracteres."},"email":{"type":"string","description":"E-mail do usuário."},"password":{"type":"string","description":"Senha do usuário, usada para autenticação e restringir serviços. Deve conter pelo menos 8 caracteres, 1 caractere maiúsculo e 1 dígito."}},"example":{"name":"John Doe","email":"johdoe@email.com","password":"Senha1234"}},"UserCreatedResponse":{"type":"object","required":["id","name","email"],"properties":{"id":{"type":"number","description":"O id gerado automaticamente do usuário registrado."},"name":{"type":"string","description":"Nome do usuário. Deve ter entre 5 e 50 caracteres."},"email":{"type":"string","description":"E-mail do usuário."}},"example":{"id":1,"name":"John Doe","email":"johdoe@email.com"}},"UserCreationFailResponse":{"type":"object","properties":{"messages":{"type":"array","items":{"type":"string"},"example":["Já existe um usuário cadastrado com esse email","Nome do usuário precisa ter entre 5 e 50 caracteres","Email inválido","Password must contain at least 8 characters, 1 uppercase character, and 1 digit"]}}},"LoginCredentials":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","description":"E-mail do usuário."},"password":{"type":"string","description":"Senha do usuário, usada para autenticação e restringir serviços. Deve conter pelo menos 8 caracteres, 1 caractere maiúsculo e 1 dígito."}},"example":{"email":"johdoe@email.com","password":"Senha1234"}},"LoginSuccessResponse":{"type":"object","properties":{"authorized":{"type":"boolean","description":"Informa se o usuário está autorizado"},"user":{"type":"object","properties":{"id":{"type":"number","description":"O id do usuário autenticado"},"name":{"type":"string","description":"O nome do usuário autenticado"},"email":{"type":"string","description":"O e-mail do usuário autenticado"}}},"token":{"type":"string","description":"O token JWT do usuário autenticado"}},"example":{"authorized":true,"user":{"id":1,"name":"John Doe","email":"johdoe@email.com"},"token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJPbmxpbmUgSldUIEJ1aWxkZXIiLCJpYXQiOjE2NzQyNTI0MjEsImV4cCI6MTcwNTc4ODQyMSwiYXVkIjoid3d3LmV4YW1wbGUuY29tIiwic3ViIjoianJvY2tldEBleGFtcGxlLmNvbSIsIkdpdmVuTmFtZSI6IkpvaG5ueSIsIlN1cm5hbWUiOiJSb2NrZXQiLCJFbWFpbCI6Impyb2NrZXRAZXhhbXBsZS5jb20iLCJSb2xlIjpbIk1hbmFnZXIiLCJQcm9qZWN0IEFkbWluaXN0cmF0b3IiXX0.hADhrkAEQrbRwyVoWdm0xLvWhUf-cGMt5x2Kx0cBocI"}},"LoginFailResponse":{"type":"object","properties":{"authorized":{"type":"boolean","description":"Informa se o usuário está autorizado"},"message":{"type":"string","description":"Mensagem informando que a autenticação falhou"}},"example":{"authorized":false,"message":"Usuário não autorizado"}},"InvalidUserEmailResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que o e-mail do usuário recebido é inválido"}},"example":{"message":"Email inválido"}},"NoUserFoundResponse":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que nenhum usuário foi encontrado"}},"example":{"message":"Usuário não encontrado"}},"UserNotAuthorized":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem informando que o usuário não está autorizado a realizar a ação solicitada"}},"example":{"message":"Usuário não autorizado"}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"responses":{"UnauthorizedError":{"description":"O token de acesso está faltando ou é inválido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserNotAuthorized"}}}}}},"tags":[]}